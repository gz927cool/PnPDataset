# **历史索引原子级语义抽取规范 V5.2 (全量深度工程集成版)**

本规范是艺术史知识工程中，将非结构化索引表转化为生产级、高精度、原子化知识图谱三元组的最高指导准则。

## **一、 算法核心哲学与底层逻辑 (Core Philosophy)**

1. **绝对原子化与扁平化 (Total Atomicity)**：  
   * 每一个三元组由 Subject | Predicate | Object 构成，严禁在任何字段内出现逗号、括号或复合描述。  
   * **地理扁平化**：复合地点 Palazzo X, Rome, Italy 必须拆解为：  
     1. (Palazzo X) \-- is\_located\_in \-- (Rome)  
     2. (Rome) \-- is\_located\_in \-- (Italy)  
2. **语义穷尽还原 (Semantic Exhaustion)**：  
   * 挖掘索引中“隐藏”的行为。例如 Patronage of Canaletto 不仅意味着资助，通常还暗示了 commissioned（委任）和 has\_social\_link（社交）。  
3. **溯源一致性算子 (The Traceability Operator)**：  
   * **Row ID 强绑定**：原始数据的每一行是不可篡改的锚点。  
   * **多对一映射**：一行原始数据可爆破生成 N 个三元组，但所有 N 个三元组必须共享该原始 Row ID。  
4. **递归语义闭环 (Recursive Loop Resolution)**：  
   * 针对 see under 指令，执行“深度优先搜索”。抓取目标实体的核心身份（Identity）和在全书中的核心赞助资产，直接实例化到当前行。  
5. **零匿名与 SENP 5.0 命名规范**：  
   * **正式化命名**：客体必须是艺术史界公认的正式标题（如 *The Bacchanal of the Andrians*）。  
   * **唯一性构造**：若无官方名，则按 \[Type\]\_\[Subject\]\_\[Artist\] 构造，但输出时需剥离 ID 后缀，保持原子名。

## **二、 语义处理全路径流程 (End-to-End Data Pipeline)**

### **第一步：环境预处理 (Preprocessing)**

1. **行号分配**：为原始 Markdown 表格每一行（含占位行、参见行）分配 Row ID \[1..N\]。  
2. **结构扫描**：识别 Main Entry、Location 与 Sub-entry 的层级嵌套关系，建立上下文堆栈。

### **第二步：触发式原文检索 (TCR \- Contextual Retrieval)**

1. **锚点定位**：根据 Page Numbers 字段，通过语义索引精准定位 CHP-\*.md 章节。  
2. **语义抓取**：读取目标页码前后的段落及**脚注（Footnotes）**。  
3. **实体对齐**：将缩写、代词、头衔（如 "The Prince"）还原为具体的历史人物。

### **第三步：递归重定向还原 (Recursive "See-under" Algorithm)**

当 Sub-entry 或 Detail 出现 see under \[Target\] 时：

1. **跨条目检索**：立即检索索引表中以 Target 为 Main Entry 的所有行。  
2. **特征提取**：提取 Target 的正式姓名、职业、核心赞助人/艺术家。  
3. **三元组回填**：将这些核心特征转化为当前 Row ID 下的 Predicate。  
   * *示例*：Row 34 提到 Alexander VII | see under Chigi。解析器需检索 Chigi 条目，发现其资助了 Bernini，则在 Row 34 生成 (Alexander VII) \-- is\_patron\_of \-- (Bernini)。

### **第四步：联网跨向验证与补全 (WACV \- Augmented Validation)**

1. **Getty TGN 校验**：对所有地理名词进行行政级联检索。若索引仅写 Venice，自动补全 (Venice) \-- is\_located\_in \-- (Italy)。  
2. **Getty ULAN 校验**：标准化人物姓名。  
3. **史实纠偏**：查询 Wikipedia/Art History Database。  
   * 若索引提到的作品由于战争、死亡未动工，谓词强制使用 planned\_to\_create，Status 标注为 Planned。

### **第五步：原子化三元组爆破 (Atomic Triplet Generation)**

1. **动作拆解**：将索引中的动名词还原为原子谓语。  
2. **证据固化**：在 Evidence\_Logic 字段中详细描述：哪一页原文提供了证据，联网校对发现了什么。

### **第六步：完整性审计与质量评估 (Integrity Audit & Reporting)**

1. **全量对账**：遍历 Row ID 列表，检查每一个 ID 是否至少对应一个有效三元组。  
2. **过滤归档**：将未生成三元组的 ID 归入“无匹配汇总”，并注明原因（如：占位头、纯页码占位）。  
3. **报表输出**：统计总行数、匹配数、过滤数。

## **三、 核心谓词逻辑库 (原子化精细分类)**

| 分类 | 精细化谓词 (Predicate) | 语义边界说明 |
| :---- | :---- | :---- |
| **社会与经济** | **spouse\_of** | 仅限正式婚姻。 |
|  | **agent\_for** | 处理艺术交易、财务、运输的中介。 |
|  | **commissioned\_via** | 表示通过代理人下达订单。 |
|  | **rival\_of** | 明确记录的艺术竞争或社会对抗。 |
|  | **pupil\_of** | 明确的师徒传承关系。 |
| **艺术与生产** | **is\_author\_of** | 确证存在的作品（Status: Confirmed）。 |
|  | **planned\_to\_create** | 有委任意向但最终未实行的行为（Status: Planned）。 |
|  | **depicts** | 作品所表现的视觉主体。 |
|  | **specialized\_in** | 艺术家的题材专长（Genre）。 |
| **地理与空间** | **is\_housed\_at** | 实体的物理现存地（不可移动或馆藏）。 |
|  | **is\_located\_in** | 严格的地理隶属/包含关系。 |
|  | **settled\_in / active\_in** | 人物的长期定居（\>1年）或执业核心地。 |

## **四、 输出标准与统计模板 (Output Standards)**

### **1\. 结果表格定义**

* **Subject**: 实体主体。  
* **Predicate**: 原子谓词。  
* **Object**: 原子客体（正式名）。  
* **Status**: Confirmed / Planned / Lost / Genre / Placeholder。  
* **Evidence\_Logic**: 详细的 TCR/WACV 推理链条。  
* **Row ID**: 原始行号锚点。

### **2\. 完整性报告模板**

* **原始数据总行数**：\[Count\]  
* **成功转换行数**：\[Count\]  
* **无匹配/过滤行数**：\[Count\]  
* **无匹配清单**：{Row ID: 原因}

## **五、 极端案例处理原则 (Edge Case Protocol)**

1. **多重地点处理**：若主项带地点且子项也带地点（如 Gallery X, London | work in Rome），必须针对两个地点分别建立活跃空间三元组。  
2. **跨数据集冲突**：若 A.md 与 B.md 对同一事件描述有异，以原著原文（TCR）为第一优先级，WACV 为补充标注。  
3. **肖像 Trinity 算子**：处理肖像索引时，必须生成“作者-作品”、“作品-对象”、“作者-社会关系”三个维度的原子链。