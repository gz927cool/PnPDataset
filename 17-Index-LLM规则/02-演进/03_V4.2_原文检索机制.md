# **历史索引原子级语义抽取规范 V4.2**

本规范旨在将弗朗西斯·哈斯克尔（Francis Haskell）《赞助人与画家》中的结构化索引表（Metadata）转化为具备极高语义精准度的知识图谱三元组。V4.2 版本引入了\*\*触发式原文检索（Triggered Contextual Retrieval, TCR）\*\*机制，通过与著作正文（Markdown 章节资源）的实时比对，消除历史实体的指代模糊性。

## **一、 算法核心哲学 (The Core Logic)**

1. **绝对原子化 (Absolute Atomicity)**：每一个三元组必须是不可再分的最小逻辑单元。  
2. **语义具象还原 (Restoration)**：将索引中的动名词还原为“主语驱动”的主动谓语。  
3. **身份社会学深度 (Identity Depth)**：将社会等级（教皇、领事、画商）转化为权力和交易逻辑。  
4. **地理层级爆破 (Geographic Explosion)**：地点后缀（如 , Venice）必须剥离并转化为包含关系。  
5. **元数据完全隔离 (Metadata Isolation)**：页码仅作为索引证据溯源，不进入实体字段。  
6. **语境驱动推断 (Contextual Inference)**：**\[V4.2 新增\]** 当索引信息不足以确定实体关系时，强制触发原文语境检索以补全语义。

## **二、 语义处理流 (Data Pipeline)**

算法接触记录时，必须依次通过以下五个逻辑站：

### **1\. 过滤站 (The Filters)**

* **静态信息过滤**：仅有页码无动态描述的记录标记为 \[已过滤: 仅统计占位\]。  
* **宏观背景过滤**：描述时代背景而非具体行为（如 17th century art）标记为 \[已过滤: 背景\]。

### **2\. 触发式原文检索站 (TCR Station) \[V4.2 强化\]**

* **触发条件**：  
  * 实体名不完整（如仅有姓氏 "Smith", "Barberini"）。  
  * Sub-entry 包含代词或模糊谓词（如 "influence of", "relations with"）。  
  * 多重身份重叠（如人物既是赞助人又是收藏家）。  
* **检索逻辑**：  
  * 通过 Page Numbers 字段定位 CHP-\*.md 章节。  
  * 在目标页码上下 500 字内检索关键词（Main Entry \+ Sub-entry）。  
  * 根据正文描述判定实体全称及具体行为类型。

### **3\. 谓词映射站 (Predicate Mapping)**

* 根据解析后的动作，从“核心谓词逻辑库”选择最精准谓词。

### **4\. 推理算子站 (Reasoning Operators)**

* 应用肖像、机构、地理等高级算子进行逻辑拓扑。

### **5\. 校验站 (Validation)**

* 检查是否存在环状逻辑错误或实体冲突。

## **三、 核心谓词逻辑库 (Predicate Library)**

* **is\_author\_of**：艺术家与作品（含草图、版画）。  
* **is\_patron\_of**：显性的资金资助、订单下达。  
* **is\_collector\_of**：对已有艺术品的收购行为。  
* **has\_social\_link**：具象化的社交关系（师生、随行、友谊、竞争）。  
* **is\_located\_in**：物理定位、机构分支。  
* **influenced\_by / influences**：**\[V4.2 细化\]** 仅在正文明确提到风格或观念影响时使用。  
* **commissioned\_by**：受……委任（与 is\_patron\_of 互补）。

## **四、 高级推理算子 (Advanced Reasoning)**

### **1\. 肖像双映射算子 (Portrait Mapping)**

* **逻辑**：任何肖像记录必须同时触发**艺术创作轴**与**社会关系轴**。  
* **推演**：Van Dyck | portrait of Cardinal Bentivoglio  
  1. (Van Dyck) \-- is\_author\_of \-- (Portrait X)  
  2. (Portrait X) \-- depicts \-- (Cardinal Bentivoglio)  
  3. (Van Dyck) \-- has\_social\_link \-- (Cardinal Bentivoglio)

### **2\. TCR 身份还原算子 \[V4.2 新增\]**

* **逻辑**：处理缩写或代词。  
* **案例**：索引 Smith | his Dutch pictures。  
* **TCR 行为**：检索 10\_CHP-10.md 中关于 Smith 的段落，识别出其全称为 Joseph Smith (Consul)，且作品类型涵盖 Vermeer, Steen 等。  
* **输出**：(Joseph Smith) \-- is\_collector\_of \-- (Dutch Paintings)。

### **3\. 描述性短语降解算子**

* **逻辑**：将客体中的动名词短语转化为独立的三元组链条。  
* **推演**：patronage of Canaletto $\\rightarrow$ (Subject) \-- is\_patron\_of \-- (Canaletto)。

### **4\. 跨地区机构分支算子**

* **逻辑**：对于 Jesuits, Art dealers 等。  
* **推演**：Jesuits | Venice $\\rightarrow$ (Jesuits) \-- **is\_located\_in** \-- (Venice)。

## **五、 准确率保障：模糊推断准则**

在 V4.2 框架下，处理模糊实体遵循以下优先级：

1. **原文判定准则**：若正文（CHP 文件）明确了人物全名，则覆盖索引中的简写。  
2. **地理锚定准则**：若多个同名人物并存，优先根据 Location 字段进行地域隔离（如 Rome 的 Barberini 与 Florence 的区别）。  
3. **时间线校验**：若行为发生在 1623-1644 年间，且主语为 Pope，则自动推断为 Urban VIII。

## **六、 示例演示 (Demonstration)**

原始数据：  
Main Entry: Canaletto | Sub-entry: and Joseph Smith | Page: 291  
**V4.2 TCR 处理过程**：

1. **触发检索**：谓词 "and" 模糊，且需确认两人关系。  
2. **原文溯源**：定位 11\_CHP-11.md 第 291 页。  
3. **提取语境**："Smith... launched the firm... commissioned drawings... Canaletto... was as yet almost unknown."  
4. **三元组生成**：  
   * (Joseph Smith) \-- is\_patron\_of \-- (Canaletto)  
   * (Joseph Smith) \-- has\_social\_link \-- (Canaletto)  
   * (Joseph Smith) \-- is\_located\_in \-- (Venice) \[基于上下文定位\]

**版本说明**：V4.2 版通过强化 TCR 机制，使算法具备了“翻阅原著”的能力，解决了历史语境下实体关系推断的难题。