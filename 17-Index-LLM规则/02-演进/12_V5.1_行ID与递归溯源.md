# **历史索引原子级语义抽取规范 V5.1 (全量集成溯源版)**

本规范是艺术史知识图谱构建的最高准则。V5.1 版本引入了“行级溯源”与“递归重定向解析”机制，旨在消除数据缺失并实现信息的闭环还原。

## **一、 算法核心哲学 (The Core Philosophy)**

1. **绝对原子化 (Absolute Atomicity)**：  
   * 三元组必须是不可再分的最小逻辑单元。  
   * **地理层级原子化**：严禁复合地址。任何包含“建筑、城市、国家”的项必须拆分为独立的 is\_located\_in 关系链。  
2. **溯源一致性 (Traceability Consistency)**：  
   * **\[V5.1 新增\]** 原始数据集的每一行必须拥有唯一编号（Row ID）。  
   * 输出的每一个三元组必须携带 Row ID 标签，严禁“凭空产生”或“无故丢失”数据行。  
3. **递归语义还原 (Recursive Restoration)**：  
   * **\[V5.1 修正\]** 针对 see\_under 指令，严禁将其视为单纯的跳转标签。必须触发递归机制，提取跳转目标的核心身份与行为，生成实质性三元组。  
4. **零匿名占位 (Zero Anonymity)**：  
   * 严禁出现 Portrait X 或 Work 1。无法定名的实体必须使用 SENP 5.0 协议构造唯一性描述名称。  
5. **存续状态标识 (Status & Fact)**：  
   * 必须区分 Confirmed (确有其作) 与 Planned (历史愿望/未执行计划)。

## **二、 语义处理全路径 (The Data Pipeline)**

### **第一步：预处理与行编号 (Row ID Assignment)**

* **指令**：在解析前，为原始索引表的每一行分配全局唯一 Row ID。  
* **目标**：建立解析结果与源数据的 1:N 映射关系，作为完整性校验的基准。

### **第二步：触发式原文检索 (TCR \- Contextual Retrieval)**

* **任务**：定位 CHP-\*.md **正文及脚注**。  
* **指代消解**：将“该红衣主教”还原为具体姓名。识别隐藏在 Sub-entry 后的第三方中介（Agent）。

### **第三步：递归重定向处理 (Recursive See-under Resolution)**

* **操作算子**：当检测到 see under \[Target\] 时：  
  1. 立即触发 WACV/TCR 检索 Target 的正式身份（如教皇与其本名的关联）。  
  2. 提取该实体在全书语境下的核心艺术赞助属性（如 Alexander VII 的贝尔尼尼赞助关系）。  
  3. 将上述实质性信息回填至当前 Row ID 对应的结果集中。

### **第四步：联网验证与纠偏 (WACV \- External Validation)**

* **任务**：核实生卒年、标准化地理层级（Getty TGN）、追踪作品现存馆藏（National Gallery/RCT）。  
* **纠偏**：若史实证实委任因战争中断（如 Bernini-Henrietta 案），强制将谓词修正为 planned\_to\_create 并标记状态。

### **第五步：原子化输出 (Atomic Output)**

* **指令**：将复杂记录“爆破”为多行三元组。  
* **示例**：Church A, Rome $\\rightarrow$ (Church A) is\_located\_in (Rome) \+ (Rome) is\_located\_in (Italy)。

## **三、 高级推理算子 (Advanced Operators)**

### **1\. 中介代理链算子 (Broker Chain)**

* **逻辑**：将 A 通过 B 购买 C 拆解为：(A) commissioned\_via (B) 与 (B) agent\_for (A)。

### **2\. 肖像计划溯源算子 (Planned Work Operator)**

* **逻辑**：(艺术家) planned\_to\_create (作品) \+ (参考画作) used\_as\_model\_for (计划作品)。

### **3\. 地理包含算子 (Geo-Containment)**

* **逻辑**：强制进行行政级联拆解。

## **四、 核心谓词逻辑库 (精细化标准)**

| 分类 | 谓词 (Predicate) | 语义说明 |
| :---- | :---- | :---- |
| **社会/身份** | **spouse\_of** | 配偶/婚姻。 |
|  | **agent\_for** | 财务、艺术、商业代理。 |
|  | **rival\_of** | 明确的职业或政治竞争。 |
| **创作/存续** | **is\_author\_of** | 确证存在的作品。 |
|  | **planned\_to\_create** | 历史上由于外部原因未执行的委任/计划。 |
|  | **depicts** | 作品所表现的人物。 |
| **空间/地理** | **is\_housed\_at** | 物理存放地（不可移动或现代馆藏）。 |
|  | **is\_located\_in** | 地理原子化包含关系（必选）。 |
|  | **settled\_in / active\_in** | 定居地或职业活跃场域。 |

## **五、 输出格式与校验机制 (Output & Integrity)**

### **1\. 结果输出格式 (CSV/Table)**

| Subject | Predicate | Object | Status | Evidence\_Logic | Row ID |
| :---- | :---- | :---- | :---- | :---- | :---- |

### **2\. 二次完整性校验机制 (Double-Check Mechanism)**

* **自检指令**：解析完成后，必须逐一核对 Row ID。若源数据的某一行在解析结果中无对应 Row ID 行，立即重申 TCR 流程进行补全。  
* **See-under 深度自检**：检查是否所有“参见”行均已转化为具象的 is\_patron\_of 或 is\_resident\_of 三元组，而非保留重定向描述。

## **六、 典型解析示例 (V5.1)**

原始行 \[34\]：Alexander VII | see under Chigi, Fabio  
V5.1 TCR/WACV 处理：

1. (Alexander VII) \-- spouse\_of \-- (Fabio Chigi) \[WACV: 同一实体确认\]  
2. (Alexander VII) \-- is\_patron\_of \-- (Gian Lorenzo Bernini) \[具象行为还原\]  
3. (Alexander VII) \-- is\_resident\_of \-- (Rome) \[空间归属\]  
4. **Row ID** 均标注为 **34**。